!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Viva=e()}}(function(){return function i(a,u,s){function f(t,e){if(!u[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=u[t]={exports:{}};a[t][0].call(o.exports,function(e){var n=a[t][1][e];return f(n||e)},o,o.exports,i,a,u,s)}return u[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)f(s[e]);return f}({1:[function(e,n,t){var r=e("ngraph.random"),o={lazyExtend:function(){return e("ngraph.merge").apply(this,arguments)},randomIterator:function(){return r.randomIterator.apply(r,arguments)},random:function(){return r.random.apply(r,arguments)},events:e("ngraph.events")};o.Graph={version:e("./version.js"),graph:e("ngraph.graph"),serializer:function(){return{loadFromJSON:e("ngraph.fromjson"),storeToJSON:e("ngraph.tojson")}},centrality:e("./Algorithms/centrality.js"),operations:e("./Algorithms/operations.js"),geom:function(){return{intersect:e("gintersect"),intersectRect:e("./Utils/intersectRect.js")}},webgl:e("./WebGL/webgl.js"),webglInputEvents:e("./WebGL/webglInputEvents.js"),generator:function(){return e("ngraph.generators")},Input:{domInputManager:e("./Input/domInputManager.js"),webglInputManager:e("./Input/webglInputManager.js")},Utils:{dragndrop:e("./Input/dragndrop.js"),findElementPosition:e("./Utils/findElementPosition.js"),timer:e("./Utils/timer.js"),getDimension:e("./Utils/getDimensions.js"),events:e("./Utils/backwardCompatibleEvents.js")},Layout:{forceDirected:e("ngraph.forcelayout"),constant:e("./Layout/constant.js")},View:{Texture:e("./WebGL/texture.js"),webglAtlas:e("./WebGL/webglAtlas.js"),webglImageNodeProgram:e("./WebGL/webglImageNodeProgram.js"),webglLinkProgram:e("./WebGL/webglLinkProgram.js"),webglNodeProgram:e("./WebGL/webglNodeProgram.js"),webglLine:e("./WebGL/webglLine.js"),webglSquare:e("./WebGL/webglSquare.js"),webglImage:e("./WebGL/webglImage.js"),webglGraphics:e("./View/webglGraphics.js"),_webglUtil:{parseColor:e("./WebGL/parseColor.js")},svgGraphics:e("./View/svgGraphics.js"),renderer:e("./View/renderer.js"),cssGraphics:function(){throw new Error("cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},svgNodeFactory:function(){throw new Error("svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},community:function(){throw new Error("community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module")}},Rect:e("./Utils/rect.js"),svg:e("simplesvg"),BrowserInfo:e("./Utils/browserInfo.js")},n.exports=o},{"./Algorithms/centrality.js":36,"./Algorithms/operations.js":37,"./Input/domInputManager.js":38,"./Input/dragndrop.js":39,"./Input/webglInputManager.js":40,"./Layout/constant.js":41,"./Utils/backwardCompatibleEvents.js":42,"./Utils/browserInfo.js":43,"./Utils/findElementPosition.js":45,"./Utils/getDimensions.js":46,"./Utils/intersectRect.js":47,"./Utils/rect.js":49,"./Utils/timer.js":50,"./View/renderer.js":52,"./View/svgGraphics.js":53,"./View/webglGraphics.js":54,"./WebGL/parseColor.js":55,"./WebGL/texture.js":56,"./WebGL/webgl.js":57,"./WebGL/webglAtlas.js":58,"./WebGL/webglImage.js":59,"./WebGL/webglImageNodeProgram.js":60,"./WebGL/webglInputEvents.js":61,"./WebGL/webglLine.js":62,"./WebGL/webglLinkProgram.js":63,"./WebGL/webglNodeProgram.js":64,"./WebGL/webglSquare.js":65,"./version.js":66,gintersect:3,"ngraph.events":9,"ngraph.forcelayout":11,"ngraph.fromjson":13,"ngraph.generators":14,"ngraph.graph":16,"ngraph.merge":17,"ngraph.random":30,"ngraph.tojson":31,simplesvg:32}],2:[function(e,n,t){r.removeEventListener=function(e,n,t,r){return(o=o||(document.addEventListener?{add:i,rm:a}:{add:u,rm:s})).rm(e,n,t,r)},r.addEventListener=r,n.exports=r;var o=null;function r(e,n,t,r){return(o=o||(document.addEventListener?{add:i,rm:a}:{add:u,rm:s})).add(e,n,t,r)}function i(e,n,t,r){e.addEventListener(n,t,r)}function a(e,n,t,r){e.removeEventListener(n,t,r)}function u(e,n,t,r){if(r)throw new Error("cannot useCapture in oldIE");e.attachEvent("on"+n,t)}function s(e,n,t,r){e.detachEvent("on"+n,t)}},{}],3:[function(e,n,t){n.exports=function(e,n,t,r,o,i,a,u){var s,f,c,d,l,p,v,h,g,m,y,x,w={x:0,y:0};return m=(s=r-n)*a+(c=e-t)*u+(l=t*n-e*r),0==(g=s*o+c*i+l)||0==m||0<=g!=4<=m?(h=(f=u-i)*t+(d=o-a)*r+(p=a*i-o*u),(0==(v=f*e+d*n+p)||0==h||0<=v!=0<=h)&&0!=(y=s*d-f*c)?(y<0?-y/2:y/2,0,x=c*p-d*l,w.x=(x<0?x-0:x+0)/y,x=f*l-s*p,w.y=(x<0?x-0:x+0)/y,w):null):null}},{}],4:[function(e,n,t){n.exports.degree=e("./src/degree.js"),n.exports.betweenness=e("./src/betweenness.js"),n.exports.closeness=e("./src/closeness.js"),n.exports.eccentricity=e("./src/eccentricity.js")},{"./src/betweenness.js":5,"./src/closeness.js":6,"./src/degree.js":7,"./src/eccentricity.js":8}],5:[function(e,n,t){n.exports=function(i,r){var a,o=[],u=[],s=Object.create(null),f=Object.create(null),c=Object.create(null),d=Object.create(null),l=Object.create(null);i.forEachNode(function(e){l[e.id]=0}),i.forEachNode(function(e){(function(e){i.forEachNode(function(e){var n=e.id;s[n]=[],f[n]=-1,c[n]=0}),f[e]=0,c[e]=1,o.push(e);for(;o.length;){var n=o.shift();u.push(n),i.forEachLinkedNode(n,t,r)}function t(e){!function(e){-1===f[e]&&(f[e]=f[n]+1,o.push(e));f[e]===f[n]+1&&(c[e]+=c[n],s[e].push(n))}(e.id)}})(a=e.id),function(){i.forEachNode(p);for(;u.length;){for(var e=u.pop(),n=(1+d[e])/c[e],t=s[e],r=0;r<t.length;++r){var o=t[r];d[o]+=c[o]*n}e!==a&&(l[e]+=d[e])}}()}),r||Object.keys(l).forEach(function(e){l[e]/=2});return l;function p(e){d[e.id]=0}}},{}],6:[function(e,n,t){n.exports=function(r,o){var i,a=[],u=Object.create(null),s=Object.create(null);return r.forEachNode(function(e){s[e.id]=0}),r.forEachNode(function(e){(function(e){r.forEachNode(function(e){var n=e.id;u[n]=-1}),u[e]=0,a.push(e);for(;a.length;){var t=a.shift();r.forEachLinkedNode(t,n,o)}function n(e){var n=e.id;-1===u[n]&&(u[n]=u[t]+1,a.push(n))}})(i=e.id),function(){var e=Object.keys(u).map(function(e){return u[e]}).filter(function(e){return-1!==e}),n=e.length,t=e.reduce(function(e,n){return e+n});s[i]=0<t?(n-1)/t:0}()}),s}},{}],7:[function(e,n,t){function i(e,n){var t=0;if(!e)return t;for(var r=0;r<e.length;r+=1)t+=e[r].toId===n?1:0;return t}function a(e,n){var t=0;if(!e)return t;for(var r=0;r<e.length;r+=1)t+=e[r].fromId===n?1:0;return t}function u(e){return e?e.length:0}n.exports=function(t,e){var r,o=Object.create(null);if("both"===(e=(e||"both").toLowerCase())||"inout"===e)r=u;else if("in"===e)r=i;else{if("out"!==e)throw new Error("Expected centrality degree kind is: in, out or both");r=a}return t.forEachNode(function(e){var n=t.getLinks(e.id);o[e.id]=r(n,e.id)}),o}},{}],8:[function(e,n,t){n.exports=function(r,o){var n,i=[],a=Object.create(null),u=Object.create(null);return r.forEachNode(function(e){u[e.id]=0}),r.forEachNode(function(e){(function(e){r.forEachNode(function(e){var n=e.id;a[n]=-1}),a[e]=0,i.push(e);for(;i.length;){var t=i.shift();r.forEachLinkedNode(t,n,o)}function n(e){var n=e.id;-1===a[n]&&(a[n]=a[t]+1,i.push(n))}})(n=e.id),function(){var t=0;Object.keys(a).forEach(function(e){var n=a[e];t<n&&(t=n)}),u[n]=t}()}),u}},{}],9:[function(e,n,t){n.exports=function(e){!function(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],t=0;t<n.length;++t)if(e.hasOwnProperty(n[t]))throw new Error("Subject cannot be eventified, since it already has property '"+n[t]+"'")}(e);var n=function(i){var a=Object.create(null);return{on:function(e,n,t){if("function"!=typeof n)throw new Error("callback is expected to be a function");var r=a[e];return(r=r||(a[e]=[])).push({callback:n,ctx:t}),i},off:function(e,n){if(void 0===e)return a=Object.create(null),i;if(a[e])if("function"!=typeof n)delete a[e];else for(var t=a[e],r=0;r<t.length;++r)t[r].callback===n&&t.splice(r,1);return i},fire:function(e){var n,t=a[e];if(!t)return i;1<arguments.length&&(n=Array.prototype.splice.call(arguments,1));for(var r=0;r<t.length;++r){var o=t[r];o.callback.apply(o.ctx,n)}return i}}}(e);return e.on=n.on,e.off=n.off,e.fire=n.fire,e}},{}],10:[function(e,n,t){function i(n,t,r){if(n.hasOwnProperty(r)){if("function"==typeof t[r])return;t[r]=function(e){return void 0!==e?(n[r]=e,t):n[r]}}}n.exports=function(e,n,t){if("[object Array]"===Object.prototype.toString.call(t))for(var r=0;r<t.length;++r)i(e,n,t[r]);else for(var o in e)i(e,n,o)}},{}],11:[function(m,e,n){e.exports=function(i,e){if(!i)throw new Error("Graph structure cannot be undefined");var a=m("ngraph.physics.simulator")(e),t=function(e){var n=i.getLinks(e);return n?1+n.length/3:1};e&&"function"==typeof e.nodeMass&&(t=e.nodeMass);var u=Object.create(null),o={},r=0,s=a.settings.springTransform||x;r=0,i.forEachNode(function(e){d(e.id),r+=1}),i.forEachLink(p),i.on("changed",n);var f=!1,c={step:function(){if(0===r)return!0;var e=a.step();c.lastMove=e,c.fire("step");var n=e/r<=.01;return f!==n&&function(e){c.fire("stable",e)}(f=n),n},getNodePosition:function(e){return g(e).pos},setNodePosition:function(e){var n=g(e);n.setPosition.apply(n,Array.prototype.slice.call(arguments,1)),a.invalidateBBox()},getLinkPosition:function(e){var n=o[e];if(n)return{from:n.from.pos,to:n.to.pos}},getGraphRect:function(){return a.getBBox()},forEachBody:function(n){Object.keys(u).forEach(function(e){n(u[e],e)})},pinNode:function(e,n){g(e.id).isPinned=!!n},isNodePinned:function(e){return g(e.id).isPinned},dispose:function(){i.off("changed",n),c.fire("disposed")},getBody:function(e){return u[e]},getSpring:function(e,n){var t;if(void 0===n)t="object"!=typeof e?e:e.id;else{var r=i.hasLink(e,n);if(!r)return;t=r.id}return o[t]},simulator:a,graph:i,lastMove:0};return y(c),c;function n(e){for(var n=0;n<e.length;++n){var t=e[n];"add"===t.changeType?(t.node&&d(t.node.id),t.link&&p(t.link)):"remove"===t.changeType&&(t.node&&l(t.node),t.link&&v(t.link))}r=i.getNodesCount()}function d(e){var n=u[e];if(!n){var t=i.getNode(e);if(!t)throw new Error("initBody() was called with unknown node id");var r=t.position;if(!r){var o=function(e){var n=[];if(!e.links)return n;for(var t=Math.min(e.links.length,2),r=0;r<t;++r){var o=e.links[r],i=o.fromId!==e.id?u[o.fromId]:u[o.toId];i&&i.pos&&n.push(i)}return n}(t);r=a.getBestNewBodyPosition(o)}(n=a.addBodyAt(r)).id=e,u[e]=n,h(e),function(e){return e&&(e.isPinned||e.data&&e.data.isPinned)}(t)&&(n.isPinned=!0)}}function l(e){var n=e.id,t=u[n];t&&(u[n]=null,delete u[n],a.removeBody(t))}function p(e){h(e.fromId),h(e.toId);var n=u[e.fromId],t=u[e.toId],r=a.addSpring(n,t,e.length);s(e,r),o[e.id]=r}function v(e){var n=o[e.id];if(n){var t=i.getNode(e.fromId),r=i.getNode(e.toId);t&&h(t.id),r&&h(r.id),delete o[e.id],a.removeSpring(n)}}function h(e){var n=u[e];if(n.mass=t(e),Number.isNaN(n.mass))throw new Error("Node mass should be a number")}function g(e){var n=u[e];return n||(d(e),n=u[e]),n}},e.exports.simulator=m("ngraph.physics.simulator");var y=m("ngraph.events");function x(){}},{"ngraph.events":12,"ngraph.physics.simulator":19}],12:[function(e,n,t){arguments[4][9][0].apply(t,arguments)},{dup:9}],13:[function(e,n,t){n.exports=function(e,n,t){var r;n=n||f,t=t||f,r="string"==typeof e?JSON.parse(e):e;var o,i=s();if(void 0===r.links||void 0===r.nodes)throw new Error("Cannot load graph without links and nodes");for(o=0;o<r.nodes.length;++o){var a=n(r.nodes[o]);if(!a.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");i.addNode(a.id,a.data)}for(o=0;o<r.links.length;++o){var u=t(r.links[o]);if(!u.hasOwnProperty("fromId")||!u.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");i.addLink(u.fromId,u.toId,u.data)}return i};var s=e("ngraph.graph");function f(e){return e}},{"ngraph.graph":16}],14:[function(h,e,n){var t=h("ngraph.graph");function r(v){return{ladder:t,complete:function(e){if(!e||e<1)throw new Error("At least two nodes are expected for complete graph");var n,t,r=v();for(n=0;n<e;++n)for(t=n+1;t<e;++t)n!==t&&r.addLink(n,t);return r},completeBipartite:function(e,n){if(!e||!n||e<0||n<0)throw new Error("Graph dimensions are invalid. Number of nodes in each partition should be greater than 0");var t,r,o=v();for(t=0;t<e;++t)for(r=e;r<e+n;++r)o.addLink(t,r);return o},balancedBinTree:function(e){if(e<0)throw new Error("Invalid number of nodes in balanced tree");var n,t=v(),r=Math.pow(2,e);0===e&&t.addNode(1);for(n=1;n<r;++n){var o=n,i=2*o,a=2*o+1;t.addLink(o,i),t.addLink(o,a)}return t},path:function(e){if(!e||e<0)throw new Error("Invalid number of nodes");var n,t=v();for(t.addNode(0),n=1;n<e;++n)t.addLink(n-1,n);return t},circularLadder:function(e){if(!e||e<0)throw new Error("Invalid number of nodes");var n=t(e);return n.addLink(0,e-1),n.addLink(e,2*e-1),n},grid:function(e,n){if(e<1||n<1)throw new Error("Invalid number of nodes in grid graph");var t,r,o=v();if(1===e&&1===n)return o.addNode(0),o;for(t=0;t<e;++t)for(r=0;r<n;++r){var i=t+r*e;0<t&&o.addLink(i,t-1+r*e),0<r&&o.addLink(i,t+(r-1)*e)}return o},grid3:function(e,n,t){if(e<1||n<1||t<1)throw new Error("Invalid number of nodes in grid3 graph");var r,o,i,a=v();if(1===e&&1===n&&1===t)return a.addNode(0),a;for(i=0;i<t;++i)for(r=0;r<e;++r)for(o=0;o<n;++o){var u=i*e*n,s=r+o*e+u;0<r&&a.addLink(s,r-1+o*e+u),0<o&&a.addLink(s,r+(o-1)*e+u),0<i&&a.addLink(s,r+o*e+(i-1)*e*n)}return a},noLinks:function(e){if(e<0)throw new Error("Number of nodes should be >= 0");var n,t=v();for(n=0;n<e;++n)t.addNode(n);return t},wattsStrogatz:function(e,n,t,r){if(e<=n)throw new Error("Choose smaller `k`. It cannot be larger than number of nodes `n`");var o,i,a=h("ngraph.random").random(r||42),u=v();for(o=0;o<e;++o)u.addNode(o);for(var s=Math.floor(n/2+1),f=1;f<s;++f)for(o=0;o<e;++o)i=(f+o)%e,u.addLink(o,i);for(f=1;f<s;++f)for(o=0;o<e;++o)if(a.nextDouble()<t){var c=o;i=(f+o)%e;var d=a.next(e),l=d===c||u.hasLink(c,d);if(l&&u.getLinks(c).length===e-1)continue;for(;l;)d=a.next(e),l=d===c||u.hasLink(c,d);var p=u.hasLink(c,i);u.removeLink(p),u.addLink(c,d)}return u},cliqueCircle:function(e,n){if(e<1)throw new Error("Invalid number of cliqueCount in cliqueCircle");if(n<1)throw new Error("Invalid number of cliqueSize in cliqueCircle");for(var o=v(),t=0;t<e;++t)r(n,t*n),0<t&&o.addLink(t*n,t*n-1);return o.addLink(0,o.getNodesCount()-1),o;function r(e,n){for(var t=0;t<e;++t)o.addNode(t+n);for(t=0;t<e;++t)for(var r=t+1;r<e;++r)o.addLink(t+n,r+n)}}};function t(e){if(!e||e<0)throw new Error("Invalid number of nodes");var n,t=v();for(n=0;n<e-1;++n)t.addLink(n,n+1),t.addLink(e+n,e+n+1),t.addLink(n,e+n);return t.addLink(e-1,2*e-1),t}}e.exports=r(t),e.exports.factory=r},{"ngraph.graph":16,"ngraph.random":15}],15:[function(e,n,t){function r(e){return new o("number"==typeof e?e:+new Date)}function o(e){this.seed=e}function i(){var e=this.seed;return e=4294967295&(3042594569^(e=(e=4294967295&((e=(e=4294967295&(3345072700^(e=e+2127912214+(e<<12)&4294967295)^e>>>19))+374761393+(e<<5)&4294967295)+3550635116^e<<9))+4251993797+(e<<3)&4294967295)^e>>>16),(268435455&(this.seed=e))/268435456}n.exports=r,n.exports.random=r,n.exports.randomIterator=function(o,e){var i=e||r();if("function"==typeof i.next)return{forEach:function(e){var n,t,r;for(n=o.length-1;0<n;--n)t=i.next(n+1),r=o[t],o[t]=o[n],o[n]=r,e(r);o.length&&e(o[0])},shuffle:function(){var e,n,t;for(e=o.length-1;0<e;--e)n=i.next(e+1),t=o[n],o[n]=o[e],o[e]=t;return o}};throw new Error("customRandom does not match expected API: next() function is missing")},o.prototype.next=function(e){return Math.floor(this.nextDouble()*e)},o.prototype.nextDouble=i,o.prototype.uniform=i,o.prototype.gaussian=function(){var e,n,t;for(;n=2*this.nextDouble()-1,t=2*this.nextDouble()-1,e=n*n+t*t,1<=e||0===e;);return n*Math.sqrt(-2*Math.log(e)/e)}},{}],16:[function(e,n,t){n.exports=function(e){"uniqueLinkId"in(e=e||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now own each graph\nis considered to be not a multigraph by default (each edge is unique)."),e.multigraph=e.uniqueLinkId);void 0===e.multigraph&&(e.multigraph=!1);var a="function"==typeof Object.create?Object.create(null):{},u=[],s={},o=0,n=0,t=Object.keys?N:k,f=e.multigraph?function(e,n,t){var r=T(e,n),o=s.hasOwnProperty(r);if(o||w(e,n)){o||(s[r]=0);var i="@"+ ++s[r];r=T(e+i,n+i)}return new I(e,n,t,r)}:function(e,n,t){var r=T(e,n);return new I(e,n,t,r)},r=[],c=b,i=b,d=b,l=b,p={addNode:g,addLink:function(e,n,t){d();var r=m(e)||g(e),o=m(n)||g(n),i=f(e,n,t);u.push(i),_(r,i),e!==n&&_(o,i);return c(i,"add"),l(),i},removeLink:x,removeNode:y,getNode:m,getNodesCount:function(){return o},getLinksCount:function(){return u.length},getLinks:function(e){var n=m(e);return n?n.links:null},forEachNode:t,forEachLinkedNode:function(e,n,t){var r=m(e);if(r&&r.links&&"function"==typeof n)return t?function(e,n,t){for(var r=0;r<e.length;++r){var o=e[r];if(o.fromId===n&&t(a[o.toId],o))return!0}}(r.links,e,n):function(e,n,t){for(var r=0;r<e.length;++r){var o=e[r],i=o.fromId===n?o.toId:o.fromId;if(t(a[i],o))return!0}}(r.links,e,n)},forEachLink:function(e){var n,t;if("function"==typeof e)for(n=0,t=u.length;n<t;++n)e(u[n])},beginUpdate:d,endUpdate:l,clear:function(){d(),t(function(e){y(e.id)}),l()},hasLink:w,hasNode:m,getLink:w};return P(p),function(){var e=p.on;p.on=function(){return p.beginUpdate=d=E,p.endUpdate=l=L,c=v,i=h,(p.on=e).apply(p,arguments)}}(),p;function v(e,n){r.push({link:e,changeType:n})}function h(e,n){r.push({node:e,changeType:n})}function g(e,n){if(void 0===e)throw new Error("Invalid node identifier");d();var t=m(e);return t?(t.data=n,i(t,"update")):(t=new A(e,n),o++,i(t,"add")),a[e]=t,l(),t}function m(e){return a[e]}function y(e){var n=m(e);if(!n)return!1;d();var t=n.links;if(t){n.links=null;for(var r=0;r<t.length;++r)x(t[r])}return delete a[e],o--,i(n,"remove"),l(),!0}function x(e){if(!e)return!1;var n=j(e,u);if(n<0)return!1;d(),u.splice(n,1);var t=m(e.fromId),r=m(e.toId);return t&&0<=(n=j(e,t.links))&&t.links.splice(n,1),r&&0<=(n=j(e,r.links))&&r.links.splice(n,1),c(e,"remove"),l(),!0}function w(e,n){var t,r=m(e);if(!r||!r.links)return null;for(t=0;t<r.links.length;++t){var o=r.links[t];if(o.fromId===e&&o.toId===n)return o}return null}function b(){}function E(){n+=1}function L(){0===(n-=1)&&0<r.length&&(p.fire("changed",r),r.length=0)}function N(e){if("function"==typeof e)for(var n=Object.keys(a),t=0;t<n.length;++t)if(e(a[n[t]]))return!0}function k(e){var n;if("function"==typeof e)for(n in a)if(e(a[n]))return!0}};var P=e("ngraph.events");function j(e,n){if(!n)return-1;if(n.indexOf)return n.indexOf(e);var t,r=n.length;for(t=0;t<r;t+=1)if(n[t]===e)return t;return-1}function A(e,n){this.id=e,this.links=null,this.data=n}function _(e,n){e.links?e.links.push(n):e.links=[n]}function I(e,n,t,r){this.fromId=e,this.toId=n,this.data=t,this.id=r}function T(e,n){return e.toString()+"👉 "+n.toString()}},{"ngraph.events":9}],17:[function(e,n,t){n.exports=function e(n,t){var r;n=n||{};if(t)for(r in t)if(t.hasOwnProperty(r)){var o=n.hasOwnProperty(r),i=typeof t[r],a=!o||typeof n[r]!=i;a?n[r]=t[r]:"object"==i&&(n[r]=e(n[r],t[r]))}return n}},{}],18:[function(e,n,t){function r(e,n){this.pos=new o(e,n),this.prevPos=new o(e,n),this.force=new o,this.velocity=new o,this.mass=1}function o(e,n){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof n?n:0)}function i(e,n,t){this.pos=new a(e,n,t),this.prevPos=new a(e,n,t),this.force=new a,this.velocity=new a,this.mass=1}function a(e,n,t){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0,this.z="number"==typeof e.z?e.z:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof n?n:0,this.z="number"==typeof t?t:0)}n.exports={Body:r,Vector2d:o,Body3d:i,Vector3d:a},r.prototype.setPosition=function(e,n){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=n},o.prototype.reset=function(){this.x=this.y=0},i.prototype.setPosition=function(e,n,t){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=n,this.prevPos.z=this.pos.z=t},a.prototype.reset=function(){this.x=this.y=this.z=0}},{}],19:[function(x,e,n){e.exports=function(n){var a=x("./lib/spring"),e=x("ngraph.expose"),t=x("ngraph.merge"),r=x("ngraph.events"),o=(n=t(n,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20})).createQuadTree||x("ngraph.quadtreebh"),i=n.createBounds||x("./lib/bounds"),u=n.createDragForce||x("./lib/dragForce"),s=n.createSpringForce||x("./lib/springForce"),f=n.integrator||x("./lib/eulerIntegrator"),c=n.createBody||x("./lib/createBody"),d=[],l=[],p=o(n),v=i(d,n),h=s(n),g=u(n),m=!0,y={bodies:d,quadTree:p,springs:l,settings:n,step:function(){!function(){var e,n=d.length;if(n)for(p.insertBodies(d);n--;)(e=d[n]).isPinned||(e.force.reset(),p.updateBodyForce(e),g.update(e));n=l.length;for(;n--;)h.update(l[n])}();var e=f(d,n.timeStep);return v.update(),e},addBody:function(e){if(!e)throw new Error("Body is required");return d.push(e),e},addBodyAt:function(e){if(!e)throw new Error("Body position is required");var n=c(e);return d.push(n),n},removeBody:function(e){if(e){var n=d.indexOf(e);if(!(n<0))return d.splice(n,1),0===d.length&&v.reset(),!0}},addSpring:function(e,n,t,r,o){if(!e||!n)throw new Error("Cannot add null spring to force simulator");"number"!=typeof t&&(t=-1);var i=new a(e,n,t,0<=o?o:-1,r);return l.push(i),i},getTotalMovement:function(){return 0},removeSpring:function(e){if(e){var n=l.indexOf(e);return-1<n?(l.splice(n,1),!0):void 0}},getBestNewBodyPosition:function(e){return v.getBestNewPosition(e)},getBBox:function(){return m&&(v.update(),m=!1),v.box},invalidateBBox:function(){m=!0},gravity:function(e){return void 0!==e?(n.gravity=e,p.options({gravity:e}),this):n.gravity},theta:function(e){return void 0!==e?(n.theta=e,p.options({theta:e}),this):n.theta}};return e(n,y),r(y),y}},{"./lib/bounds":20,"./lib/createBody":21,"./lib/dragForce":22,"./lib/eulerIntegrator":23,"./lib/spring":24,"./lib/springForce":25,"ngraph.events":9,"ngraph.expose":10,"ngraph.merge":17,"ngraph.quadtreebh":26}],20:[function(e,n,t){n.exports=function(a,u){var s=e("ngraph.random").random(42),f={x1:0,y1:0,x2:0,y2:0};return{box:f,update:function(){var e=a.length;if(0===e)return;var n=Number.MAX_VALUE,t=Number.MAX_VALUE,r=Number.MIN_VALUE,o=Number.MIN_VALUE;for(;e--;){var i=a[e];i.isPinned?(i.pos.x=i.prevPos.x,i.pos.y=i.prevPos.y):(i.prevPos.x=i.pos.x,i.prevPos.y=i.pos.y),i.pos.x<n&&(n=i.pos.x),i.pos.x>r&&(r=i.pos.x),i.pos.y<t&&(t=i.pos.y),i.pos.y>o&&(o=i.pos.y)}f.x1=n,f.x2=r,f.y1=t,f.y2=o},reset:function(){f.x1=f.y1=0,f.x2=f.y2=0},getBestNewPosition:function(e){var n=f,t=0,r=0;if(e.length){for(var o=0;o<e.length;++o)t+=e[o].pos.x,r+=e[o].pos.y;t/=e.length,r/=e.length}else t=(n.x1+n.x2)/2,r=(n.y1+n.y2)/2;var i=u.springLength;return{x:t+s.next(i)-i/2,y:r+s.next(i)-i/2}}}}},{"ngraph.random":30}],21:[function(e,n,t){var r=e("ngraph.physics.primitives");n.exports=function(e){return new r.Body(e)}},{"ngraph.physics.primitives":18}],22:[function(r,e,n){e.exports=function(n){var e=r("ngraph.merge"),t={update:function(e){e.force.x-=n.dragCoeff*e.velocity.x,e.force.y-=n.dragCoeff*e.velocity.y}};return r("ngraph.expose")(n=e(n,{dragCoeff:.02}),t,["dragCoeff"]),t}},{"ngraph.expose":10,"ngraph.merge":17}],23:[function(e,n,t){n.exports=function(e,n){var t,r=0,o=0,i=0,a=0,u=e.length;if(0===u)return 0;for(t=0;t<u;++t){var s=e[t],f=n/s.mass;s.velocity.x+=f*s.force.x,s.velocity.y+=f*s.force.y;var c=s.velocity.x,d=s.velocity.y,l=Math.sqrt(c*c+d*d);1<l&&(s.velocity.x=c/l,s.velocity.y=d/l),r=n*s.velocity.x,i=n*s.velocity.y,s.pos.x+=r,s.pos.y+=i,o+=Math.abs(r),a+=Math.abs(i)}return(o*o+a*a)/u}},{}],24:[function(e,n,t){n.exports=function(e,n,t,r,o){this.from=e,this.to=n,this.length=t,this.coeff=r,this.weight="number"==typeof o?o:1}},{}],25:[function(t,e,n){e.exports=function(f){var e=t("ngraph.merge"),c=t("ngraph.random").random(42),n={update:function(e){var n=e.from,t=e.to,r=e.length<0?f.springLength:e.length,o=t.pos.x-n.pos.x,i=t.pos.y-n.pos.y,a=Math.sqrt(o*o+i*i);0===a&&(o=(c.nextDouble()-.5)/50,i=(c.nextDouble()-.5)/50,a=Math.sqrt(o*o+i*i));var u=a-r,s=(!e.coeff||e.coeff<0?f.springCoeff:e.coeff)*u/a*e.weight;n.force.x+=s*o,n.force.y+=s*i,t.force.x-=s*o,t.force.y-=s*i}};return t("ngraph.expose")(f=e(f,{springCoeff:2e-4,springLength:80}),n,["springCoeff","springLength"]),n}},{"ngraph.expose":10,"ngraph.merge":17,"ngraph.random":30}],26:[function(o,e,n){function E(e,n){return 0===n?e.quad0:1===n?e.quad1:2===n?e.quad2:3===n?e.quad3:null}function L(e,n,t){0===n?e.quad0=t:1===n?e.quad1=t:2===n?e.quad2=t:3===n&&(e.quad3=t)}e.exports=function(e){(e=e||{}).gravity="number"==typeof e.gravity?e.gravity:-1,e.theta="number"==typeof e.theta?e.theta:.8;var m=o("ngraph.random").random(1984),n=o("./node"),t=o("./insertStack"),y=o("./isSamePosition"),v=e.gravity,h=[],x=new t,g=e.theta,r=[],d=0,w=b();return{insertBodies:function(e){var n,t=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MIN_VALUE,a=e.length;n=a;for(;n--;){var u=e[n].pos.x,s=e[n].pos.y;u<t&&(t=u),o<u&&(o=u),s<r&&(r=s),i<s&&(i=s)}var f=o-t,c=i-r;c<f?i=r+f:o=t+c;d=0,(w=b()).left=t,w.right=o,w.top=r,w.bottom=i,0<=(n=a-1)&&(w.body=e[n]);for(;n--;)l(e[n])},getRoot:function(){return w},updateBodyForce:function(e){var n,t,r,o,i=h,a=0,u=0,s=1,f=0,c=1;i[0]=w;for(;s;){var d=i[f],l=d.body;s-=1,f+=1;var p=l!==e;l&&p?(t=l.pos.x-e.pos.x,r=l.pos.y-e.pos.y,0===(o=Math.sqrt(t*t+r*r))&&(t=(m.nextDouble()-.5)/50,r=(m.nextDouble()-.5)/50,o=Math.sqrt(t*t+r*r)),n=v*l.mass*e.mass/(o*o*o),a+=n*t,u+=n*r):p&&(t=d.massX/d.mass-e.pos.x,r=d.massY/d.mass-e.pos.y,0===(o=Math.sqrt(t*t+r*r))&&(t=(m.nextDouble()-.5)/50,r=(m.nextDouble()-.5)/50,o=Math.sqrt(t*t+r*r)),(d.right-d.left)/o<g?(n=v*d.mass*e.mass/(o*o*o),a+=n*t,u+=n*r):(d.quad0&&(i[c]=d.quad0,s+=1,c+=1),d.quad1&&(i[c]=d.quad1,s+=1,c+=1),d.quad2&&(i[c]=d.quad2,s+=1,c+=1),d.quad3&&(i[c]=d.quad3,s+=1,c+=1)))}e.force.x+=a,e.force.y+=u},options:function(e){return e?("number"==typeof e.gravity&&(v=e.gravity),"number"==typeof e.theta&&(g=e.theta),this):{gravity:v,theta:g}}};function b(){var e=r[d];return e?(e.quad0=null,e.quad1=null,e.quad2=null,e.quad3=null,e.body=null,e.mass=e.massX=e.massY=0,e.left=e.right=e.top=e.bottom=0):(e=new n,r[d]=e),++d,e}function l(e){for(x.reset(),x.push(w,e);!x.isEmpty();){var n=x.pop(),t=n.node,r=n.body;if(t.body){var o=t.body;if(t.body=null,y(o.pos,r.pos)){var i=3;do{var a=m.nextDouble(),u=(t.right-t.left)*a,s=(t.bottom-t.top)*a;o.pos.x=t.left+u,o.pos.y=t.top+s,i-=1}while(0<i&&y(o.pos,r.pos));if(0===i&&y(o.pos,r.pos))return}x.push(t,o),x.push(t,r)}else{var f=r.pos.x,c=r.pos.y;t.mass=t.mass+r.mass,t.massX=t.massX+r.mass*f,t.massY=t.massY+r.mass*c;var d=0,l=t.left,p=(t.right+l)/2,v=t.top,h=(t.bottom+v)/2;p<f&&(d+=1,l=p,p=t.right),h<c&&(d+=2,v=h,h=t.bottom);var g=E(t,d);g?x.push(g,r):((g=b()).left=l,g.top=v,g.right=p,g.bottom=h,g.body=r,L(t,d,g))}}}}},{"./insertStack":27,"./isSamePosition":28,"./node":29,"ngraph.random":30}],27:[function(e,n,t){function r(){this.stack=[],this.popIdx=0}function o(e,n){this.node=e,this.body=n}(n.exports=r).prototype={isEmpty:function(){return 0===this.popIdx},push:function(e,n){var t=this.stack[this.popIdx];t?(t.node=e,t.body=n):this.stack[this.popIdx]=new o(e,n),++this.popIdx},pop:function(){if(0<this.popIdx)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},{}],28:[function(e,n,t){n.exports=function(e,n){var t=Math.abs(e.x-n.x),r=Math.abs(e.y-n.y);return t<1e-8&&r<1e-8}},{}],29:[function(e,n,t){n.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},{}],30:[function(e,n,t){function r(e){function n(){return(268435455&(t=4294967295&(3042594569^(t=(t=4294967295&((t=(t=4294967295&(3345072700^(t=t+2127912214+(t<<12)&4294967295)^t>>>19))+374761393+(t<<5)&4294967295)+3550635116^t<<9))+4251993797+(t<<3)&4294967295)^t>>>16)))/268435456}var t="number"==typeof e?e:+new Date;return{next:function(e){return Math.floor(n()*e)},nextDouble:function(){return n()}}}n.exports={random:r,randomIterator:function(o,e){var i=e||r();if("function"==typeof i.next)return{forEach:function(e){var n,t,r;for(n=o.length-1;0<n;--n)t=i.next(n+1),r=o[t],o[t]=o[n],e(o[n]=r);o.length&&e(o[0])},shuffle:function(e){var n,t,r;for(n=e.length-1;0<n;--n)r=e[t=i.next(n+1)],e[t]=e[n],e[n]=r;return e}};throw new Error("customRandom does not match expected API: next() function is missing")}}},{}],31:[function(e,n,t){n.exports=function(e,n,t){var r={nodes:[],links:[]},o=n||function(e){var n={id:e.id};void 0!==e.data&&(n.data=e.data);return n},i=t||function(e){var n={fromId:e.fromId,toId:e.toId};void 0!==e.data&&(n.data=e.data);return n};return e.forEachNode(function(e){r.nodes.push(o(e))}),e.forEachLink(function(e){r.links.push(i(e))}),JSON.stringify(r)}},{}],32:[function(e,n,t){(n.exports=d).compile=e("./lib/compile");var u=d.compileTemplate=e("./lib/compile_template"),s=e("add-event-listener"),f="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xlink";function d(e,n){var t=function(e){var n,r=e;if("string"==typeof e)r=window.document.createElementNS(f,e);else if(e.simplesvg)return e;return r.simplesvg=!0,r.attr=function(e,n){if(2!==arguments.length)return r.getAttributeNS(null,e);null!==n?r.setAttributeNS(null,e,n):r.removeAttributeNS(null,e);return r},r.append=function(e){var n=d(e);return r.appendChild(n),n},r.link=function(e){if(arguments.length)return r.setAttributeNS(c,"xlink:href",e),r;return r.getAttributeNS(c,"xlink:href")},r.text=function(e){return void 0===e?r.textContent:(r.textContent=e,r)},r.on=function(e,n,t){return s.addEventListener(r,e,n,t),r},r.off=function(e,n,t){return s.removeEventListener(r,e,n,t),r},r.dataSource=function(e){n=n||u(r);return n.link(e),r},r}(e);if(void 0===n)return t;for(var r=Object.keys(n),o=0;o<r.length;++o){var i=r[o],a=n[i];"link"===i?t.link(a):t.attr(i,a)}return t}},{"./lib/compile":33,"./lib/compile_template":34,"add-event-listener":2}],33:[function(e,n,t){var r=e("./domparser.js"),o=e("../");n.exports=function(e){try{return e=function(e){if(!e)return;var n=e.match(/^<\w+/);{if(n){var t=n[0].length;return e.substr(0,t)+' xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" '+e.substr(t)}throw new Error("Cannot parse input text: invalid xml?")}}(e),o(r.parseFromString(e,"text/xml").documentElement)}catch(e){throw e}}},{"../":32,"./domparser.js":35}],34:[function(e,n,t){n.exports=function(e){var r=Object.create(null);return function e(n,t){var r=n.nodeType;var o=1===r||3===r;if(!o)return;var i;if(n.hasChildNodes()){var a=n.childNodes;for(i=0;i<a.length;++i)e(a[i],t)}3===r&&c(n,t);if(!n.attributes)return;var u=n.attributes;for(i=0;i<u.length;++i)s(u[i],n,t)}(e,r),{link:function(n){function t(e){e(n)}Object.keys(r).forEach(function(e){r[e].forEach(t)})}}};var f=/{{(.+?)}}/;function s(e,n,t){var r=e.value;if(r){var o=r.match(f);if(o){var i=e.localName,a=o[1];if(!(a.indexOf(".")<0))throw new Error("simplesvg currently does not support nested bindings");var u=t[a];u?u.push(s):u=t[a]=[s]}}function s(e){n.setAttributeNS(null,i,e[a])}}function c(n,e){var t=n.nodeValue;if(t){var r=t.match(f);if(r){var o=r[1],i=(o.indexOf("."),e[o]);i?i.push(a):i=e[o]=[a]}}function a(e){n.nodeValue=e[o]}}},{}],35:[function(e,n,t){function r(){throw new Error("DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg")}n.exports="undefined"!=typeof DOMParser?new DOMParser:{parseFromString:r}},{}],36:[function(e,n,t){var r=e("ngraph.centrality");function o(e){return s(r.betweenness(e))}function i(e,n){return s(r.degree(e,n))}function a(e){return s(r.closeness(e))}function u(e){return s(r.eccentricity(e))}function s(t){return Object.keys(t).sort(function(e,n){return t[n]-t[e]}).map(function(e){return{key:e,value:t[e]}})}n.exports=function(){return{betweennessCentrality:o,degreeCentrality:i,closenessCentrality:a,eccentricityCentrality:u}}},{"ngraph.centrality":4}],37:[function(e,n,t){n.exports=function(){return{density:function(e,n){var t=e.getNodesCount();return 0===t?NaN:n?e.getLinksCount()/(t*(t-1)):2*e.getLinksCount()/(t*(t-1))}}}},{}],38:[function(e,n,t){n.exports=function(e,o){var i={};return{bindDragNDrop:function(e,n){var t;if(n){var r=o.getNodeUI(e.id);t=a(r),"function"==typeof n.onStart&&t.onStart(n.onStart),"function"==typeof n.onDrag&&t.onDrag(n.onDrag),"function"==typeof n.onStop&&t.onStop(n.onStop),i[e.id]=t}else(t=i[e.id])&&(t.release(),delete i[e.id])}}};var a=e("./dragndrop.js")},{"./dragndrop.js":39}],39:[function(e,n,t){n.exports=function(i){function o(e,n,t){p&&p(e,{x:n-x,y:t-w}),x=n,w=t}function a(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function u(e){e.preventDefault&&e.preventDefault()}function n(e){return a(e),!1}function t(e){e=e||window.event,o(e,e.clientX,e.clientY)}function e(e){return e=e||window.event,b?(a(e),!1):1===e.button&&null!==window.event||0===e.button?(x=e.clientX,w=e.clientY,y=e.target||e.srcElement,l&&l(e,{x:x,y:w}),k.on("mousemove",t),k.on("mouseup",L),a(e),g=window.document.onselectstart,m=window.document.ondragstart,window.document.onselectstart=n,y.ondragstart=n,!1):void 0}function r(e){if("function"==typeof h){(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1;var n,t=function(e){var n=0,t=0;return(e=e||window.event).pageX||e.pageY?(n=e.pageX,t=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+window.document.body.scrollLeft+window.document.documentElement.scrollLeft,t=e.clientY+window.document.body.scrollTop+window.document.documentElement.scrollTop),[n,t]}(e),r=j(i),o={x:t[0]-r[0],y:t[1]-r[1]};n=e.wheelDelta?e.wheelDelta/360:e.detail/-9,h(e,n,o)}}function s(e){!h&&e?"webkit"===P.browser?i.addEventListener("mousewheel",r,!1):i.addEventListener("DOMMouseScroll",r,!1):h&&!e&&("webkit"===P.browser?i.removeEventListener("mousewheel",r,!1):i.removeEventListener("DOMMouseScroll",r,!1)),h=e}function f(e,n){return(e.clientX-n.clientX)*(e.clientX-n.clientX)+(e.clientY-n.clientY)*(e.clientY-n.clientY)}function c(e){if(1===e.touches.length){a(e);var n=e.touches[0];o(e,n.clientX,n.clientY)}else if(2===e.touches.length){var t=f(e.touches[0],e.touches[1]),r=0;t<E?r=-1:E<t&&(r=1),h(e,r,{x:e.touches[0].clientX,y:e.touches[0].clientY}),E=t,a(e),u(e)}}function d(e){if(1===e.touches.length)return function(e,n){a(e),u(e),x=n.clientX,w=n.clientY,y=e.target||e.srcElement,l&&l(e,{x:x,y:w}),b||(b=!0,k.on("touchmove",c),k.on("touchend",N),k.on("touchcancel",N))}(e,e.touches[0]);2===e.touches.length&&(a(e),u(e),E=f(e.touches[0],e.touches[1]))}var l,p,v,h,g,m,y,x=0,w=0,b=!1,E=0,L=function(e){e=e||window.event,k.off("mousemove",t),k.off("mouseup",L),window.document.onselectstart=g,y.ondragstart=m,y=null,v&&v(e)},N=function(e){b=!1,k.off("touchmove",c),k.off("touchend",N),k.off("touchcancel",N),y=null,v&&v(e)};return i.addEventListener("mousedown",e),i.addEventListener("touchstart",d),{onStart:function(e){return l=e,this},onDrag:function(e){return p=e,this},onStop:function(e){return v=e,this},onScroll:function(e){return s(e),this},release:function(){i.removeEventListener("mousedown",e),i.removeEventListener("touchstart",d),k.off("mousemove",t),k.off("mouseup",L),k.off("touchmove",c),k.off("touchend",N),k.off("touchcancel",N),s(null)}}};var k=e("../Utils/documentEvents.js"),P=e("../Utils/browserInfo.js"),j=e("../Utils/findElementPosition.js")},{"../Utils/browserInfo.js":43,"../Utils/documentEvents.js":44,"../Utils/findElementPosition.js":45}],40:[function(e,n,t){n.exports=function(e,n){var r=u(n),o=null,i={},a={x:0,y:0};return r.mouseDown(function(e,n){o=e,a.x=n.clientX,a.y=n.clientY,r.mouseCapture(o);var t=i[e.id];return t&&t.onStart&&t.onStart(n,a),!0}).mouseUp(function(e){r.releaseMouseCapture(o),o=null;var n=i[e.id];return n&&n.onStop&&n.onStop(),!0}).mouseMove(function(e,n){if(o){var t=i[o.id];return t&&t.onDrag&&t.onDrag(n,{x:n.clientX-a.x,y:n.clientY-a.y}),a.x=n.clientX,a.y=n.clientY,!0}}),{bindDragNDrop:function(e,n){(i[e.id]=n)||delete i[e.id]}}};var u=e("../WebGL/webglInputEvents.js")},{"../WebGL/webglInputEvents.js":61}],41:[function(e,n,t){n.exports=function(e,n){n=l(n,{maxX:1024,maxY:1024,seed:"Deterministic randomness made me do this"});function r(e){c[e.id]=f(e),function(e,n){e.x<n.x1&&(n.x1=e.x),e.x>n.x2&&(n.x2=e.x),e.y<n.y1&&(n.y1=e.y),e.y>n.y2&&(n.y2=e.y)}(c[e.id],u)}function t(){0!==e.getNodesCount()&&(u.x1=Number.MAX_VALUE,u.y1=Number.MAX_VALUE,u.x2=Number.MIN_VALUE,u.y2=Number.MIN_VALUE,e.forEachNode(r))}function o(e){s[e.id]=e}function i(e){for(var n=0;n<e.length;++n){var t=e[n];t.node&&("add"===t.changeType?r(t.node):delete c[t.node.id]),t.link&&("add"===t.changeType?o(t.link):delete s[t.link.id])}}var a=p(n.seed),u=new v(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),s={},f=function(e){return{x:a.next(n.maxX),y:a.next(n.maxY)}},c="function"==typeof Object.create?Object.create(null):{};return e.forEachNode(r),e.forEachLink(o),e.on("changed",i),{run:function(e){this.step()},step:function(){return t(),!0},getGraphRect:function(){return u},dispose:function(){e.off("change",i)},isNodePinned:function(e){return!0},pinNode:function(e,n){},getNodePosition:d,getLinkPosition:function(e){var n=s[e];return{from:d(n.fromId),to:d(n.toId)}},setNodePosition:function(e,n,t){var r=c[e];r&&(r.x=n,r.y=t)},placeNode:function(e){return"function"==typeof e?(f=e,t(),this):f(e)}};function d(e){return c[e]}};var l=e("ngraph.merge"),p=e("ngraph.random").random,v=e("../Utils/rect.js")},{"../Utils/rect.js":49,"ngraph.merge":17,"ngraph.random":30}],42:[function(e,n,t){var r=e("ngraph.events");n.exports=function(n){return console.log("This method is deprecated. Please use Viva.events() instead"),n?void 0===n.on&&void 0===n.off&&void 0===n.fire?{extend:function(){var e=r(n);return e.addEventListener=e.on,e},on:n.on,stop:n.off}:{extend:function(){return n},on:n.on,stop:n.off}:n}},{"ngraph.events":9}],43:[function(e,n,t){n.exports=function(){if("undefined"==typeof window||!window.hasOwnProperty("navigator"))return{browser:"",version:"0"};var e=window.navigator.userAgent.toLowerCase(),n=/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||[];return{browser:n[1]||"",version:n[2]||"0"}}()},{}],44:[function(e,n,t){e("./nullEvents.js");function r(e,n){document.addEventListener(e,n)}function o(e,n){document.removeEventListener(e,n)}n.exports={on:r,off:o}},{"./nullEvents.js":48}],45:[function(e,n,t){n.exports=function(e){var n=0,t=0;if(e.offsetParent)for(;n+=e.offsetLeft,t+=e.offsetTop,null!==(e=e.offsetParent););return[n,t]}},{}],46:[function(e,n,t){n.exports=function(e){if(!e)throw{message:"Cannot get dimensions of undefined container"};var n=e.clientWidth,t=e.clientHeight;return{left:0,top:0,width:n,height:t}}},{}],47:[function(e,n,t){var s=e("gintersect");n.exports=function(e,n,t,r,o,i,a,u){return s(e,n,e,r,o,i,a,u)||s(e,r,t,r,o,i,a,u)||s(t,r,t,n,o,i,a,u)||s(t,n,e,n,o,i,a,u)}},{gintersect:3}],48:[function(e,n,t){function r(){}n.exports={on:r,off:r,stop:r}},{}],49:[function(e,n,t){n.exports=function(e,n,t,r){this.x1=e||0,this.y1=n||0,this.x2=t||0,this.y2=r||0}},{}],50:[function(e,n,t){(function(r){function a(){}n.exports=function(){var e,o,i=0,n=["ms","moz","webkit","o"];o="undefined"!=typeof window?window:void 0!==r?r:{setTimeout:a,clearTimeout:a};for(e=0;e<n.length&&!o.requestAnimationFrame;++e){var t=n[e];o.requestAnimationFrame=o[t+"RequestAnimationFrame"],o.cancelAnimationFrame=o[t+"CancelAnimationFrame"]||o[t+"CancelRequestAnimationFrame"]}o.requestAnimationFrame||(o.requestAnimationFrame=function(e){var n=(new Date).getTime(),t=Math.max(0,16-(n-i)),r=o.setTimeout(function(){e(n+t)},t);return i=n+t,r});o.cancelAnimationFrame||(o.cancelAnimationFrame=function(e){o.clearTimeout(e)});return function(e){var n;return t(),{stop:r,restart:function(){n||t()}};function t(){n=o.requestAnimationFrame(t),e()||r()}function r(){o.cancelAnimationFrame(n),n=0}}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],51:[function(e,n,t){var r=e("./nullEvents.js");function o(e,n){window.addEventListener(e,n)}function i(e,n){window.removeEventListener(e,n)}n.exports="undefined"!=typeof window?{on:o,off:i}:r},{"./nullEvents.js":48}],52:[function(e,n,t){n.exports=function(i,t){var n,r,o,a=(t=t||{}).layout,u=t.graphics,s=t.container,f=void 0===t.interactive||t.interactive,c=!1,d=!0,e=!1,l=!1,p=!1,v={offsetX:0,offsetY:0,scale:1},h=S({});return{run:function(e){return c||(function(){s=s||window.document.body,a=a||D(i,{springLength:80,springCoeff:2e-4}),u=u||M(i,{container:s}),t.hasOwnProperty("renderLinks")||(t.renderLinks=!0);t.prerender=t.prerender||0,n=(u.inputManager||R)(i,u)}(),function(){if("number"==typeof t.prerender&&0<t.prerender)for(var e=0;e<t.prerender;e+=1)a.step()}(),u.init(s),i.forEachNode(b),t.renderLinks&&i.forEachLink(L),w(),function(){U.on("resize",_),I(),g("drag")&&(o=F(s)).onDrag(function(e,n){u.translateRel(n.x,n.y),m(),h.fire("drag",n)});g("scroll")&&(o=o||F(s)).onScroll(function(e,n,t){C(n<0,t)});i.forEachNode(k),T(),i.on("changed",A)}(),c=!0),function(e){if(r)return;r=B(void 0!==e?function(){if((e-=1)<0){return!1}return y()}:y,30)}(e),this},reset:function(){u.resetScale(),w(),v.scale=1},pause:function(){p=!0,r.stop()},resume:function(){p=!1,r.restart()},rerender:function(){return m(),this},zoomOut:function(){return C(!0)},zoomIn:function(){return C(!1)},getTransform:function(){return v},moveTo:function(e,n){u.graphCenterChanged(v.offsetX-e*v.scale,v.offsetY-n*v.scale),m()},getGraphics:function(){return u},getLayout:function(){return a},dispose:function(){c=!1,T(),I(),U.off("resize",_),h.off(),r.stop(),i.forEachLink(function(e){t.renderLinks&&N(e)}),i.forEachNode(function(e){P(e),E(e)}),a.dispose(),u.release(s)},on:function(e,n){return h.on(e,n),this},off:function(e,n){return h.off(e,n),this}};function g(e){return"string"==typeof f?0<=f.indexOf(e):"boolean"!=typeof f||f}function m(){u.beginRender(),t.renderLinks&&u.renderLinks(),u.renderNodes(),u.endRender()}function y(){return e=a.step()&&!l,m(),!e}function x(){p||(e=!1,r.restart())}function w(){var e=a.getGraphRect(),n=O(s),t=(e.x2+e.x1)/2,r=(e.y2+e.y1)/2;v.offsetX=n.width/2-(t*v.scale-t),v.offsetY=n.height/2-(r*v.scale-r),u.graphCenterChanged(v.offsetX,v.offsetY),d=!1}function b(e){var n=a.getNodePosition(e.id);u.addNode(e,n)}function E(e){u.releaseNode(e)}function L(e){var n=a.getLinkPosition(e.id);u.addLink(e,n)}function N(e){u.releaseLink(e)}function k(r){if(g("node")){var e=!1;n.bindDragNDrop(r,{onStart:function(){e=a.isNodePinned(r),a.pinNode(r,!0),l=!0,x()},onDrag:function(e,n){var t=a.getNodePosition(r.id);a.setNodePosition(r.id,t.x+n.x/v.scale,t.y+n.y/v.scale),l=!0,m()},onStop:function(){a.pinNode(r,e),l=!1}})}}function P(e){n.bindDragNDrop(e,null)}function j(e){var n=e.link;if("add"===e.changeType)t.renderLinks&&L(n);else if("remove"===e.changeType)t.renderLinks&&N(n);else if("update"===e.changeType)throw"Update type is not implemented. TODO: Implement me!"}function A(e){var n,t,r,o;for(n=0;n<e.length;n+=1)(t=e[n]).node?(void 0,o=(r=t).node,"add"===r.changeType?(b(o),k(o),d&&w()):"remove"===r.changeType?(P(o),E(o),0===i.getNodesCount()&&(d=!0)):"update"===r.changeType&&(P(o),E(o),b(o),k(o))):t.link&&j(t);x()}function _(){w(),y()}function I(){o&&(o.release(),o=null)}function T(){i.off("changed",A)}function C(e,n){if(!n){var t=O(s);n={x:t.width/2,y:t.height/2}}var r=Math.pow(1.4,e?-.2:.2);return v.scale=u.scale(r,n),m(),h.fire("scale",v.scale),v.scale}};var S=e("ngraph.events"),D=e("ngraph.forcelayout"),M=e("./svgGraphics.js"),U=e("../Utils/windowEvents.js"),R=e("../Input/domInputManager.js"),B=e("../Utils/timer.js"),O=e("../Utils/getDimensions.js"),F=e("../Input/dragndrop.js")},{"../Input/domInputManager.js":38,"../Input/dragndrop.js":39,"../Utils/getDimensions.js":46,"../Utils/timer.js":50,"../Utils/windowEvents.js":51,"./svgGraphics.js":53,"ngraph.events":9,"ngraph.forcelayout":11}],53:[function(e,n,t){n.exports=function(){function a(e){e.fire("rescaled")}function t(){if(u){var e="matrix("+d+", 0, 0,"+d+","+f+","+c+")";u.attr("transform",e)}}var u,s,n,f=0,c=0,d=1,r={},o={},i=function(e){return y("rect").attr("width",10).attr("height",10).attr("fill","#00a2e8")},l=function(e,n){e.attr("x",n.x-5).attr("y",n.y-5)},p=function(e){return y("line").attr("stroke","#999")},v=function(e,n,t){e.attr("x1",n.x).attr("y1",n.y).attr("x2",t.x).attr("y2",t.y)},h={x:0,y:0},g={x:0,y:0},m={x:0,y:0};s=function(){var e=y("svg");return u=y("g").attr("buffered-rendering","dynamic"),e.appendChild(u),e}();var e={getNodeUI:function(e){return r[e]},getLinkUI:function(e){return o[e]},node:function(e){if("function"==typeof e)return i=e,this},link:function(e){if("function"==typeof e)return p=e,this},placeNode:function(e){return l=e,this},placeLink:function(e){return v=e,this},beginRender:function(){},endRender:function(){},graphCenterChanged:function(e,n){f=e,c=n,t()},inputManager:w,translateRel:function(e,n){var t=s.createSVGPoint(),r=u.getCTM(),o=s.createSVGPoint().matrixTransform(r.inverse());t.x=e,t.y=n,(t=t.matrixTransform(r.inverse())).x=(t.x-o.x)*r.a,t.y=(t.y-o.y)*r.d,r.e+=t.x,r.f+=t.y;var i="matrix("+r.a+", 0, 0,"+r.d+","+r.e+","+r.f+")";u.attr("transform",i)},scale:function(e,n){var t=s.createSVGPoint();t.x=n.x,t.y=n.y,t=t.matrixTransform(u.getCTM().inverse());var r=s.createSVGMatrix().translate(t.x,t.y).scale(e).translate(-t.x,-t.y),o=u.getCTM().multiply(r);d=o.a,f=o.e,c=o.f;var i="matrix("+o.a+", 0, 0,"+o.d+","+o.e+","+o.f+")";return u.attr("transform",i),a(this),d},resetScale:function(){d=1;return u.attr("transform","matrix(1, 0, 0, 1, 0, 0)"),a(this),this},init:function(e){e.appendChild(s),t(),"function"==typeof n&&n(s)},release:function(e){s&&e&&e.removeChild(s)},addLink:function(e,n){var t=p(e);if(t)return t.position=n,t.link=e,o[e.id]=t,0<u.childElementCount?u.insertBefore(t,u.firstChild):u.appendChild(t),t},releaseLink:function(e){var n=o[e.id];n&&(u.removeChild(n),delete o[e.id])},addNode:function(e,n){var t=i(e);if(t)return t.position=n,t.node=e,r[e.id]=t,u.appendChild(t),t},releaseNode:function(e){var n=r[e.id];n&&(u.removeChild(n),delete r[e.id])},renderNodes:function(){for(var e in r)if(r.hasOwnProperty(e)){var n=r[e];h.x=n.position.x,h.y=n.position.y,l(n,h,n.node)}},renderLinks:function(){for(var e in o)if(o.hasOwnProperty(e)){var n=o[e];g.x=n.position.from.x,g.y=n.position.from.y,m.x=n.position.to.x,m.y=n.position.to.y,v(n,g,m,n.link)}},getGraphicsRoot:function(e){return"function"==typeof e&&(s?e(s):n=e),s},getSvgRoot:function(){return s}};return x(e),e};var y=e("simplesvg"),x=e("ngraph.events"),w=e("../Input/domInputManager.js")},{"../Input/domInputManager.js":38,"ngraph.events":9,simplesvg:32}],54:[function(e,n,t){n.exports=function(o){o=C(o,{enableBlending:!0,preserveDrawingBuffer:!1,clearColor:!1,clearColorValue:{r:1,g:1,b:1,a:1}});function i(){E.updateTransform(m),L.updateTransform(m)}function a(){m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function u(){s&&f&&(d=f.width=Math.max(s.offsetWidth,1),l=f.height=Math.max(s.offsetHeight,1),c&&c.viewport(0,0,d,l),E&&E.updateSize(d/2,l/2),L&&L.updateSize(d/2,l/2))}var s,f,c,d,l,r,p,v,h=0,g=0,m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y=[],x=[],w={},b={},E=j(),L=A(),N=function(e){return _()},k=function(e){return I(3014898687)};f=window.document.createElement("canvas");var e={getLinkUI:function(e){return b[e]},getNodeUI:function(e){return w[e]},node:function(e){if("function"==typeof e)return N=e,this},link:function(e){if("function"==typeof e)return k=e,this},placeNode:function(e){return r=e,this},placeLink:function(e){return p=e,this},inputManager:P,beginRender:function(){},endRender:function(){0<g&&E.render(),0<h&&L.render()},bringLinkToFront:function(e){var n,t,r=E.getFrontLinkId();E.bringToFront(e),r>e.id&&(n=e.id,t=x[r],x[r]=x[n],x[r].id=r,x[n]=t,x[n].id=n)},graphCenterChanged:function(e,n){m[12]=2*e/d-1,m[13]=1-2*n/l,i()},addLink:function(e,n){var t=g++,r=k(e);return r.id=t,r.pos=n,E.createLink(r),x[t]=r,b[e.id]=r},addNode:function(e,n){var t=h++,r=N(e);return r.id=t,r.position=n,r.node=e,L.createNode(r),y[t]=r,w[e.id]=r},translateRel:function(e,n){m[12]+=2*m[0]*e/d/m[0],m[13]-=2*m[5]*n/l/m[5],i()},scale:function(e,n){var t=2*n.x/d-1,r=1-2*n.y/l;return t-=m[12],r-=m[13],m[12]+=t*(1-e),m[13]+=r*(1-e),m[0]*=e,m[5]*=e,i(),function(e){e.fire("rescaled")}(this),m[0]},resetScale:function(){return a(),c&&(u(),i()),this},updateSize:u,init:function(e){var n={};if(o.preserveDrawingBuffer&&(n.preserveDrawingBuffer=!0),s=e,u(),a(),s.appendChild(f),!(c=f.getContext("experimental-webgl",n))){var t="Could not initialize WebGL. Seems like the browser doesn't support it.";throw window.alert(t),t}if(o.enableBlending&&(c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.enable(c.BLEND)),o.clearColor){var r=o.clearColorValue;c.clearColor(r.r,r.g,r.b,r.a),this.beginRender=function(){c.clear(c.COLOR_BUFFER_BIT)}}E.load(c),E.updateSize(d/2,l/2),L.load(c),L.updateSize(d/2,l/2),i(),"function"==typeof v&&v(f)},release:function(e){f&&e&&e.removeChild(f)},isSupported:function(){var e=window.document.createElement("canvas");return e&&e.getContext&&e.getContext("experimental-webgl")},releaseLink:function(e){0<g&&(g-=1);var n=b[e.id];delete b[e.id],E.removeLink(n);var t=n.id;if(t<g){if(0===g||g===t)return;var r=x[g];(x[t]=r).id=t}},releaseNode:function(e){0<h&&(h-=1);var n=w[e.id];delete w[e.id],L.removeNode(n);var t=n.id;if(t<h){if(0===h||h===t)return;var r=y[h];(y[t]=r).id=t,L.replaceProperties(n,r)}},renderNodes:function(){for(var e={x:0,y:0},n=0;n<h;++n){var t=y[n];e.x=t.position.x,e.y=t.position.y,r&&r(t,e),L.position(t,e)}},renderLinks:function(){if(!this.omitLinksRendering)for(var e={x:0,y:0},n={x:0,y:0},t=0;t<g;++t){var r=x[t],o=r.pos.from;n.x=o.x,n.y=-o.y,o=r.pos.to,e.x=o.x,e.y=-o.y,p&&p(r,n,e),E.position(r,n,e)}},getGraphicsRoot:function(e){return"function"==typeof e&&(f?e(f):v=e),f},setNodeProgram:function(e){if(!c&&e)L=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},setLinkProgram:function(e){if(!c&&e)E=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},transformClientToGraphCoordinates:function(e){return e.x=2*e.x/d-1,e.y=1-2*e.y/l,e.x=(e.x-m[12])/m[0],e.y=(e.y-m[13])/m[5],e.x=e.x*(d/2),e.y=e.y*(-l/2),e},transformGraphToClientCoordinates:function(e){return e.x=e.x/(d/2),e.y=e.y/(-l/2),e.x=e.x*m[0]+m[12],e.y=e.y*m[5]+m[13],e.x=(e.x+1)*d/2,e.y=(1-e.y)*l/2,e},getNodeAtClientPos:function(e,n){if("function"!=typeof n)return null;this.transformClientToGraphCoordinates(e);for(var t=0;t<h;++t)if(n(y[t],e.x,e.y))return y[t].node;return null}};return T(e),e};var P=e("../Input/webglInputManager.js"),j=e("../WebGL/webglLinkProgram.js"),A=e("../WebGL/webglNodeProgram.js"),_=e("../WebGL/webglSquare.js"),I=e("../WebGL/webglLine.js"),T=e("ngraph.events"),C=e("ngraph.merge")},{"../Input/webglInputManager.js":40,"../WebGL/webglLine.js":62,"../WebGL/webglLinkProgram.js":63,"../WebGL/webglNodeProgram.js":64,"../WebGL/webglSquare.js":65,"ngraph.events":9,"ngraph.merge":17}],55:[function(e,n,t){n.exports=function(e){var n=10414335;if("string"==typeof e&&e)if(4===e.length&&(e=e.replace(/([^#])/g,"$1$1")),9===e.length)n=parseInt(e.substr(1),16);else{if(7!==e.length)throw'Color expected in hex format with preceding "#". E.g. #00ff00. Got value: '+e;n=parseInt(e.substr(1),16)<<8|255}else"number"==typeof e&&(n=e);return n}},{}],56:[function(e,n,t){n.exports=function(e){this.canvas=window.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isDirty=!1,this.canvas.width=this.canvas.height=e}},{}],57:[function(e,n,t){function r(e,n,t,r){for(var o=0;o<r;++o)e[n+o]=e[t+o]}function o(e,n,t,r){for(var o=0;o<r;++o){var i=e[n+o];e[n+o]=e[t+o],e[t+o]=i}}n.exports=function(a){return{createProgram:function(e,n){var t=a.createProgram(),r=u(e,a.VERTEX_SHADER),o=u(n,a.FRAGMENT_SHADER);if(a.attachShader(t,r),a.attachShader(t,o),a.linkProgram(t),a.getProgramParameter(t,a.LINK_STATUS))return t;var i=a.getShaderInfoLog(t);throw window.alert(i),i},extendArray:function(e,n,t){if((n+1)*t>e.length){var r=new Float32Array(e.length*t*2);return r.set(e),r}return e},copyArrayPart:r,swapArrayPart:o,getLocations:function(e,n){for(var t={},r=0;r<n.length;++r){var o=n[r],i=-1;if("a"===o[0]&&"_"===o[1]){if(-1===(i=a.getAttribLocation(e,o)))throw new Error("Program doesn't have required attribute: "+o);t[o.slice(2)]=i}else{if("u"!==o[0]||"_"!==o[1])throw new Error("Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'");if(null===(i=a.getUniformLocation(e,o)))throw new Error("Program doesn't have required uniform: "+o);t[o.slice(2)]=i}}return t},context:a};function u(e,n){var t=a.createShader(n);if(a.shaderSource(t,e),a.compileShader(t),a.getShaderParameter(t,a.COMPILE_STATUS))return t;var r=a.getShaderInfoLog(t);throw window.alert(r),r}}},{}],58:[function(e,n,t){var p=e("./texture.js");n.exports=function(t){var e,a=Math.sqrt(t||1024)<<0,u=a,o=1,s={},n=0,f=[],c=[];if(!function(e){return 0==(e&e-1)}(t))throw"Tiles per texture should be power of two.";var r={isDirty:!1,clearDirty:function(){var e;for(r.isDirty=!1,e=0;e<f.length;++e)f[e].isDirty=!1},remove:function(e){var n=s[e];if(!n)return!1;if(delete s[e],(o-=1)===n.offset)return!0;var t=d(n.offset);return function(e,n){var t=f[e.textureNumber].canvas,r=f[n.textureNumber].ctx,o=n.col*u,i=n.row*u;r.drawImage(t,e.col*u,e.row*u,u,u,o,i,u,u),f[e.textureNumber].isDirty=!0,f[n.textureNumber].isDirty=!0}(d(o),t),s[c[o]].offset=n.offset,c[n.offset]=c[o],l(),!0},getTextures:function(){return f},getCoordinates:function(e){return s[e]},load:function(e,n){if(s.hasOwnProperty(e))n(s[e]);else{var t=new window.Image,r=o;o+=1,t.crossOrigin="anonymous",t.onload=function(){l(),function(e,n,t){var r=d(e),o={offset:e};r.textureNumber>=f.length&&function(){var e=new p(a*u);f.push(e)}();var i=f[r.textureNumber];i.ctx.drawImage(n,r.col*u,r.row*u,u,u),c[e]=n.src,s[n.src]=o,i.isDirty=!0,t(o)}(r,t,n)},t.src=e}}};return r;function d(e){var n=e%t;return{textureNumber:e/t<<0,row:n/a<<0,col:n%a}}function i(){r.isDirty=!0,n=0,e=null}function l(){e&&(window.clearTimeout(e),n+=1,e=null),10<n?i():e=window.setTimeout(i,400)}}},{"./texture.js":56}],59:[function(e,n,t){n.exports=function(e,n){return{_texture:0,_offset:0,size:"number"==typeof e?e:32,src:n}}},{}],60:[function(e,n,t){var m=e("./webglAtlas.js"),y=e("./webgl.js");n.exports=function(n){var t,r,o,i,a,u,s,f,c,d,l=["precision mediump float;","varying vec4 color;","varying vec3 vTextureCoord;","uniform sampler2D u_sampler0;","uniform sampler2D u_sampler1;","uniform sampler2D u_sampler2;","uniform sampler2D u_sampler3;","void main(void) {","   if (vTextureCoord.z == 0.) {","     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);","   } else if (vTextureCoord.z == 1.) {","     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);","   } else if (vTextureCoord.z == 2.) {","     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);","   } else if (vTextureCoord.z == 3.) {","     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);","   } else { gl_FragColor = vec4(0, 1, 0, 1); }","}"].join("\n"),p=["attribute vec2 a_vertexPos;","attribute float a_customAttributes;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","uniform float u_tilesPerTexture;","varying vec3 vTextureCoord;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);","float corner = mod(a_customAttributes, 4.);","float tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);","float tilesPerRow = sqrt(u_tilesPerTexture);","float tileSize = 1./tilesPerRow;","float tileColumn = mod(tileIndex, tilesPerRow);","float tileRow = floor(tileIndex/tilesPerRow);","if(corner == 0.0) {","  vTextureCoord.xy = vec2(0, 1);","} else if(corner == 1.0) {","  vTextureCoord.xy = vec2(1, 1);","} else if(corner == 2.0) {","  vTextureCoord.xy = vec2(0, 0);","} else {","  vTextureCoord.xy = vec2(1, 0);","}","vTextureCoord *= tileSize;","vTextureCoord.x += tileColumn * tileSize;","vTextureCoord.y += tileRow * tileSize;","vTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);","}"].join("\n"),v=(n=n||1024,0),h=new Float32Array(64);return{load:function(e){a=y(o=e),t=new m(n),r=a.createProgram(p,l),o.useProgram(r),u=a.getLocations(r,["a_vertexPos","a_customAttributes","u_screenSize","u_transform","u_sampler0","u_sampler1","u_sampler2","u_sampler3","u_tilesPerTexture"]),o.uniform1f(u.tilesPerTexture,n),o.enableVertexAttribArray(u.vertexPos),o.enableVertexAttribArray(u.customAttributes),i=o.createBuffer()},position:function(e,n){var t=18*e.id;h[t]=n.x-e.size,h[1+t]=-n.y-e.size,h[2+t]=4*e._offset,h[3+t]=n.x+e.size,h[4+t]=-n.y-e.size,h[5+t]=4*e._offset+1,h[6+t]=n.x-e.size,h[7+t]=-n.y+e.size,h[8+t]=4*e._offset+2,h[9+t]=n.x-e.size,h[10+t]=-n.y+e.size,h[11+t]=4*e._offset+2,h[12+t]=n.x+e.size,h[13+t]=-n.y-e.size,h[14+t]=4*e._offset+1,h[15+t]=n.x+e.size,h[16+t]=-n.y+e.size,h[17+t]=4*e._offset+3},createNode:function(n){h=a.extendArray(h,v,18),v+=1;var e=t.getCoordinates(n.src);e?n._offset=e.offset:(n._offset=0,t.load(n.src,function(e){n._offset=e.offset}))},removeNode:function(e){0<v&&(v-=1);e.id<v&&0<v&&(e.src&&t.remove(e.src),a.copyArrayPart(h,18*e.id,18*v,18))},replaceProperties:function(e,n){n._offset=e._offset},updateTransform:function(e){d=!0,c=e},updateSize:function(e,n){s=e,f=n,d=!0},render:function(){o.useProgram(r),o.bindBuffer(o.ARRAY_BUFFER,i),o.bufferData(o.ARRAY_BUFFER,h,o.DYNAMIC_DRAW),d&&(d=!1,o.uniformMatrix4fv(u.transform,!1,c),o.uniform2f(u.screenSize,s,f));o.vertexAttribPointer(u.vertexPos,2,o.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),o.vertexAttribPointer(u.customAttributes,1,o.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,8),function(){if(t.isDirty){var e,n=t.getTextures();for(e=0;e<n.length;++e)!n[e].isDirty&&n[e].nativeObject||g(n[e],e);t.clearDirty()}}(),o.drawArrays(o.TRIANGLES,0,6*v)}};function g(e,n){e.nativeObject&&o.deleteTexture(e.nativeObject);var t=o.createTexture();o.activeTexture(o["TEXTURE"+n]),o.bindTexture(o.TEXTURE_2D,t),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,e.canvas),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_NEAREST),o.generateMipmap(o.TEXTURE_2D),o.uniform1i(u["sampler"+n],n),e.nativeObject=t}}},{"./webgl.js":57,"./webglAtlas.js":58}],61:[function(e,n,t){var L=e("../Utils/documentEvents.js");n.exports=function(n){if(n.webglInputEvents)return n.webglInputEvents;var c,d,l=null,p=[],v=[],h=[],g=[],t=[],m=[],y=[];!function(e){function r(e){E(t,[a,e]),i.x=e.clientX,i.y=e.clientY}function o(){d=e.getBoundingClientRect()}var i={x:0,y:0},a=null,u=1,s=+new Date,f=function(){L.off("mousemove",r),L.off("mouseup",f)};window.addEventListener("resize",o),o(),e.addEventListener("mousemove",function(e){if(!l){u++%7==0&&(o(),u=1);var n,t=!1;i.x=e.clientX-d.left,i.y=e.clientY-d.top,(n=x(i))&&a!==n?(a&&E(v,[a]),a=n,t=t||E(p,[a])):null===n&&a!==n&&(t=t||E(v,[a]),a=null),t&&w(e)}}),e.addEventListener("mousedown",function(e){var n,t=!1;o(),i.x=e.clientX-d.left,i.y=e.clientY-d.top,n=[x(i),e],a=n[0]?(t=E(h,n),L.on("mousemove",r),L.on("mouseup",f),c=window.document.onselectstart,window.document.onselectstart=b,n[0]):null,t&&w(e)}),e.addEventListener("mouseup",function(e){var n,t=+new Date;i.x=e.clientX-d.left,i.y=e.clientY-d.top;var r=x(i),o=r===a;(n=[r||a,e])[0]&&(window.document.onselectstart=c,E(t-s<400&&o?y:m,n),s=t,E(g,n)&&w(e))})}(n.getGraphicsRoot());var r={mouseEnter:function(e){"function"==typeof e&&p.push(e);return r},mouseLeave:function(e){"function"==typeof e&&v.push(e);return r},mouseDown:function(e){"function"==typeof e&&h.push(e);return r},mouseUp:function(e){"function"==typeof e&&g.push(e);return r},mouseMove:function(e){"function"==typeof e&&t.push(e);return r},click:function(e){"function"==typeof e&&m.push(e);return r},dblClick:function(e){"function"==typeof e&&y.push(e);return r},mouseCapture:function(e){l=e},releaseMouseCapture:function(){l=null}};return n.webglInputEvents=r;function o(e,n,t){if(e&&e.size){var r=e.position,o=e.size;return r.x-o<n&&n<r.x+o&&r.y-o<t&&t<r.y+o}return!0}function x(e){return n.getNodeAtClientPos(e,o)}function w(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function b(e){return w(e),!1}function E(e,n){var t;for(t=0;t<e.length;t+=1)if(e[t].apply(void 0,n))return!0}}},{"../Utils/documentEvents.js":44}],62:[function(e,n,t){var r=e("./parseColor.js");n.exports=function(e){return{color:r(e)}}},{"./parseColor.js":55}],63:[function(e,n,t){var y=e("./webgl.js");n.exports=function(){var n,t,r,o,i,a,u,s,f,c,d=2*(2*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT),l=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),p=["attribute vec2 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);","   color = a_color.abgr;","}"].join("\n"),v=0,h=new ArrayBuffer(16*d),g=new Float32Array(h),m=new Uint32Array(h);return{load:function(e){o=y(t=e),n=o.createProgram(p,l),t.useProgram(n),i=o.getLocations(n,["a_vertexPos","a_color","u_screenSize","u_transform"]),t.enableVertexAttribArray(i.vertexPos),t.enableVertexAttribArray(i.color),r=t.createBuffer()},position:function(e,n,t){var r=6*e.id;g[r]=n.x,g[1+r]=n.y,m[2+r]=e.color,g[3+r]=t.x,g[4+r]=t.y,m[5+r]=e.color},createLink:function(e){!function(){if((v+1)*d>h.byteLength){var e=new ArrayBuffer(2*h.byteLength),n=new Float32Array(e),t=new Uint32Array(e);t.set(m),g=n,m=t,h=e}}(),v+=1,a=e.id},removeLink:function(e){0<v&&(v-=1),e.id<v&&0<v&&o.copyArrayPart(m,6*e.id,6*v,6)},updateTransform:function(e){c=!0,f=e},updateSize:function(e,n){u=e,s=n,c=!0},render:function(){t.useProgram(n),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,h,t.DYNAMIC_DRAW),c&&(c=!1,t.uniformMatrix4fv(i.transform,!1,f),t.uniform2f(i.screenSize,u,s)),t.vertexAttribPointer(i.vertexPos,2,t.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(i.color,4,t.UNSIGNED_BYTE,!0,3*Float32Array.BYTES_PER_ELEMENT,8),t.drawArrays(t.LINES,0,2*v),a=v-1},bringToFront:function(e){a>e.id&&o.swapArrayPart(g,6*e.id,6*a,6),0<a&&(a-=1)},getFrontLinkId:function(){return a}}}},{"./webgl.js":57}],64:[function(e,n,t){var m=e("./webgl.js");n.exports=function(){var n,t,r,o,i,a,u,s,f,c=3*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT,d=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),l=["attribute vec3 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);","   gl_PointSize = a_vertexPos.z * u_transform[0][0];","   color = a_color.abgr;","}"].join("\n"),p=new ArrayBuffer(16*c),v=new Float32Array(p),h=new Uint32Array(p),g=0;return{load:function(e){i=m(t=e),n=i.createProgram(l,d),t.useProgram(n),o=i.getLocations(n,["a_vertexPos","a_color","u_screenSize","u_transform"]),t.enableVertexAttribArray(o.vertexPos),t.enableVertexAttribArray(o.color),r=t.createBuffer()},position:function(e,n){var t=e.id;v[4*t]=n.x,v[4*t+1]=-n.y,v[4*t+2]=e.size,h[4*t+3]=e.color},updateTransform:function(e){f=!0,s=e},updateSize:function(e,n){a=e,u=n,f=!0},removeNode:function(e){0<g&&(g-=1);e.id<g&&0<g&&i.copyArrayPart(h,4*e.id,4*g,4)},createNode:function(){(function(){if((g+1)*c>=p.byteLength){var e=new ArrayBuffer(2*p.byteLength),n=new Float32Array(e),t=new Uint32Array(e);t.set(h),v=n,h=t,p=e}})(),g+=1},replaceProperties:function(){},render:function(){t.useProgram(n),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,p,t.DYNAMIC_DRAW),f&&(f=!1,t.uniformMatrix4fv(o.transform,!1,s),t.uniform2f(o.screenSize,a,u));t.vertexAttribPointer(o.vertexPos,3,t.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(o.color,4,t.UNSIGNED_BYTE,!0,4*Float32Array.BYTES_PER_ELEMENT,12),t.drawArrays(t.POINTS,0,g)}}}},{"./webgl.js":57}],65:[function(e,n,t){var r=e("./parseColor.js");n.exports=function(e,n){return{size:"number"==typeof e?e:10,color:r(n)}}},{"./parseColor.js":55}],66:[function(e,n,t){n.exports="0.10.1"},{}]},{},[1])(1)});